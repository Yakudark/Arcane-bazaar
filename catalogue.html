<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Arcane Bazaar — Catalogue</title>
    <meta name="description" content="Catalogue des élixirs, baumes et artefacts du Arcane Bazaar" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cpath fill='%23c6a75b' d='M32 4l8 12 14 4-10 10 2 14-14-6-14 6 2-14L10 20l14-4z'/%3E%3C/svg%3E" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        /* Pagination flottante sur les côtés */
        .pagination-float {
            position: relative;
            width: 100%;
            height: 0;
            pointer-events: none;
        }

        .pagination-float-btn {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            pointer-events: auto;
            opacity: 0.85;
            transition: opacity 0.2s, box-shadow 0.2s;
            min-width: 40px;
            min-height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Style bouton ghost d'origine */
            background: none;
            border: 1px solid #c6a75b;
            color: #c6a75b;
            box-shadow: none;
            outline: none;
            user-select: none;
        }

        .pagination-float-btn:active {
            /* Effet d'enfoncement léger */
            transform: translateY(-50%) scale(0.97);
            background: rgba(198, 167, 91, 0.08);
            box-shadow: none;
        }

        .pagination-float-btn:disabled {
            opacity: 0.4;
            pointer-events: none;
        }

        .pagination-float-btn:hover:not(:disabled) {
            opacity: 1;
            background: rgba(198, 167, 91, 0.10);
            box-shadow: none;
            color: #a4842b;
            border-color: #a4842b;
        }

        #prev-page-float {
            left: 1vw;
        }

        #next-page-float {
            right: 1vw;
        }

        @media (max-width: 900px) {

            #prev-page-float,
            #next-page-float {
                left: 0.5vw;
                right: 0.5vw;
            }

            .pagination-float-btn {
                min-width: 32px;
                min-height: 32px;
                font-size: 1em;
            }
        }

        .pagination-info-custom {
            display: block;
            text-align: center;
            color: #c6a75b;
            font-family: inherit;
            font-size: 1.1em;
            font-weight: 500;
            margin: 0.5em 0 0.5em 0;
            letter-spacing: 0.02em;
        }

        /* Styles pour les filtres par catégorie */
      /* Filtres visuels par catégorie (alimentaires/potions) */
.category-cards-filter {
    display: flex;
    gap: 1.5em;
    justify-content: center;
    margin: 1em 0;
}

.category-card-filter-btn {
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.category-card-icon {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 3px solid #c6a75b;
    overflow: hidden;                  /* on cache ce qui dépasse */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* L'image à l'intérieur : zoom + recadrage */
.category-card-icon img {
    width: 150%;       /* >100% = zoom */
    height: 150%;
    object-fit: cover; /* remplis le cercle */
    transform: translate(0, 0); /* tu peux ajuster si tu veux décaler un peu */
}

/* Effet hover */
.category-card-filter-btn:hover .category-card-icon img {
    transform: scale(1.05);
}

.category-card-filter-btn span {
    margin-top: 0.5em;
    color: #c6a75b;
    font-weight: 600;
    font-size: 1em;
}

    </style>
</head>

<body>
    <header class="site-header">
        <div class="container header-inner">
            <div class="brand">
                <img class="brand-mark" src="./assets/logo.png" alt="Arcane Bazaar" />
                <span class="brand-name">Arcane Bazaar</span>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-link">Accueil</a>
                <a href="catalogue.html" class="nav-link">Catalogue</a>
                <a href="#footer" class="nav-link">Crédits</a>
                <a href="dashboard.html" id="nav-dashboard" class="nav-link hidden">Dashboard</a>
            </nav>
            <div class="auth-ctrls">
                <button id="btn-login" class="btn btn-ghost">Se connecter</button>
                <div id="user-info" class="user-info hidden">
                    <span id="user-email"></span>
                    <span id="user-role" class="badge"></span>
                    <button id="btn-logout" class="btn btn-ghost">Se déconnecter</button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section id="catalogue" class="catalogue" aria-labelledby="catalogue-title">
            <div class="container">
                <h2 id="catalogue-title" class="section-title">Catalogue</h2>

                <!-- Filtres visuels par catégorie (alimentaires/potions) -->
                <div id="category-cards-filter" class="category-cards-filter">
                    <button class="category-card-filter-btn" data-category="alimentaires" title="Filtrer Alimentaires">
                        <span class="category-card-icon">
                            <img src="assets/alimentaires.png" alt="Alimentaires">
                        </span>
                    </button>

                
                <button class="category-card-filter-btn" data-category="potions" title="Filtrer Potions">
                    <span class="category-card-icon">
                        <img src="assets/potions.png" alt="Potions">
                    </span>
                </button>

                </div>


                <!-- Pagination info en haut -->

                <div class="filters">
                    <div class="filters-row">
                        <!-- Nouveau filtre Licence -->
                        <label class="filter">
                            <span>Licence</span>
                            <select id="filter-licence">
                                <option value="all">Toutes</option>
                                <!-- Les options seront ajoutées dynamiquement plus tard -->
                            </select>
                        </label>
                        <label class="filter">
                            <span>Catégorie</span>
                            <select id="filter-category">
                                <option value="all">Toutes</option>
                            </select>
                        </label>
                        <label class="filter">
                            <span>Élément</span>
                            <select id="filter-element">
                                <option value="all">Tous</option>
                            </select>
                        </label>
                        <label class="filter">
                            <span>Tri</span>
                            <select id="sort-select">
                                <option value="price-asc">Prix: croissant</option>
                                <option value="price-desc">Prix: décroissant</option>
                                <option value="rarity-asc">Rareté: commun → légendaire</option>
                                <option value="rarity-desc">Rareté: légendaire → commun</option>
                            </select>
                        </label>
                        <button id="refresh-btn" class="btn btn-ghost" title="Rafraîchir">↻</button>
                        <div class="catalogue-view-toggle">
                            <button id="view-cards" class="btn btn-ghost active" title="Vue cartes"><i
                                    class="fa-solid fa-table-cells"></i></button>
                            <button id="view-list" class="btn btn-ghost" title="Vue liste"><i
                                    class="fa-solid fa-list"></i></button>
                        </div>
                    </div>
                </div>

                <div class="pagination-float">
                    <button id="prev-page-float" class="btn btn-ghost pagination-float-btn" title="Précédent" disabled>
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <button id="next-page-float" class="btn btn-ghost pagination-float-btn" title="Suivant" disabled>
                        <i class="fa-solid fa-chevron-right"></i>
                    </button>
                </div>

                <!-- Pagination info en bas (remplace l'ancien span dans nav.pagination) -->
                <span id="pagination-info" class="pagination-info-custom"></span>

                <div id="catalogue-grid" class="grid products-grid"></div>
                <div id="catalogue-empty" class="empty hidden">Aucun résultat pour ces filtres.</div>
                <div id="loading" class="loading hidden">Chargement…</div>
                <div id="error" class="error hidden"></div>
                <!-- Pagination controls -->
                <nav id="pagination" class="pagination hidden" aria-label="Pagination du catalogue">
                    <!-- <button id="prev-page" class="btn btn-ghost" disabled>Précédent</button> -->
                    <!-- <span id="pagination-info"></span> -->
                    <!-- <button id="next-page" class="btn btn-ghost" disabled>Suivant</button> -->
                </nav>
                <span id="pagination-info-top" class="pagination-info-custom"></span>

            </div>
        </section>
    </main>

    <footer id="footer" class="site-footer">
        <div class="container footer-inner">
            <div class="footer-col">
                <div class="brand small"><span class="brand-mark">⚜</span><span class="brand-name">Arcane Bazaar</span>
                </div>
                <p>Demo e-commerce fantasy. Données servies par Supabase.</p>
            </div>
            <div class="footer-col">
                <a href="#" class="footer-link">Mentions</a>
                <a href="#" class="footer-link">Conditions</a>
                <a href="#" class="footer-link">Contact</a>
            </div>
            <div class="footer-col">
                <p>Crédits visuels: Darjah / œuvres fictives.</p>
            </div>
        </div>
    </footer>

    <!-- Modals copiés depuis index.html pour l'auth et le produit -->
    <div id="auth-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="auth-title">
        <div class="modal-backdrop" data-close="auth"></div>
        <div class="modal-card">
            <button class="modal-close" data-close="auth" aria-label="Fermer">✕</button>
            <div class="modal-body">
                <h3 id="auth-title">Connexion</h3>
                <div id="auth-error" class="error hidden"></div>
                <div class="field">
                    <label for="auth-email">Email</label>
                    <input id="auth-email" type="email" placeholder="vous@royaume.co" autocomplete="email" />
                </div>
                <div class="field">
                    <label for="auth-password">Mot de passe</label>
                    <input id="auth-password" type="password" placeholder="••••••••" autocomplete="current-password" />
                </div>
                <div class="field" id="auth-password2-field">
                    <label for="auth-password2">Confirmer le mot de passe</label>
                    <input id="auth-password2" type="password" placeholder="••••••••" autocomplete="new-password" />
                </div>
                <div class="btn-row">
                    <button id="auth-submit" class="btn btn-primary">Se connecter</button>
                    <button id="auth-toggle" class="btn btn-ghost" data-mode="signin">Créer un compte</button>
                </div>
                <p id="auth-hint" class="muted">Vous pouvez créer un compte visiteur. Pour devenir
                    <strong>admin</strong>, il
                    faut être promu dans Supabase (voir table <code>profiles</code>).
                </p>
            </div>
        </div>
    </div>

    <div id="product-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-card">
            <button class="modal-close" data-close="modal" aria-label="Fermer">✕</button>
            <div class="modal-media">
                <img id="modal-image" src="assets/placeholder.svg" alt="Image produit" />
            </div>
            <div class="modal-body">
                <div class="modal-headline">
                    <h3 id="modal-title"></h3>
                    <div class="badges">
                        <span id="modal-rarity" class="badge"></span>
                        <span id="modal-element" class="badge"></span>
                    </div>
                </div>
                <p id="modal-short" class="muted"></p>
                <div class="stats">
                    <div class="stat"><span>Puissance</span>
                        <div class="bar">
                            <div id="bar-power" class="fill"></div>
                        </div>
                    </div>
                    <div class="stat"><span>Finesse</span>
                        <div class="bar">
                            <div id="bar-finesse" class="fill"></div>
                        </div>
                    </div>
                </div>
                <div class="price-row">
                    <span id="modal-price" class="price"></span>
                    <button class="btn btn-primary" id="modal-action">Concocter cet élixir</button>
                </div>
                <div class="flavor" id="flavor-section">
                    <h4>Profil de saveurs</h4>
                    <dl class="flavor-grid">
                        <dt>Type</dt>
                        <dd id="modal-flavor-type"></dd>
                        <dt>Profil</dt>
                        <dd id="modal-flavor-profile"></dd>
                        <dt>Notes de dégustation</dt>
                        <dd id="modal-tasting-notes"></dd>
                        <dt>Couleur</dt>
                        <dd id="modal-color"></dd>
                        <dt>Accords mets</dt>
                        <dd id="modal-food-pairing"></dd>
                        <dt>Cocktail signature</dt>
                        <dd id="modal-signature-cocktail"></dd>
                    </dl>
                </div>
                <div class="long-desc">
                    <h4>Détails</h4>
                    <p id="modal-long"></p>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script type="module" src="app.js"></script>
</body>

</html>